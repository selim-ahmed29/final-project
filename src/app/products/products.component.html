<div class="page">
  <nav class="navbar navbar-expand-lg bg-body-tertiary bg-black">
    <div class="container-fluid justify-content-center">
      <a class="navbar-brand" href="#">
        <img src="/one.png" alt="Logo" width="30" height="30">
      </a>
        <div class="navbar-nav">
          <a class="nav-link" aria-current="page" href="#">Home</a>
          <a [routerLink]="['/sell']" class="nav-link">Sell products</a>
          <button [routerLink]="['/creat']" class=" btn btn-danger btn-sm float-end">Log Out</button>
        </div>
      <!-- </div> -->
    </div>
  </nav>
  <div class="container my-4">
    <div class="form">
      <div>
        <label for="productName" class="text-white">Product Name</label>
        <input
          type="text"
          id="productName"
          [(ngModel)]="productName"
          class="form-control"
        />
      </div>
      <div>
        <label for="productCount" class="text-white">Product Count</label>
        <input
          type="number"
          id="productCount"
          [(ngModel)]="productCount"
          class="form-control"
        />
      </div>
      <div>
        <label for="productPrice" class="text-white">Product Price</label>
        <input
          type="number"
          id="productPrice"
          [(ngModel)]="productPrice"
          class="form-control mb-3"
        />
      </div>
      <div>
        <label for="productExp">EXP</label>
        <input
          type="date"
          id="productExp"
          [(ngModel)]="productExp"
          class="form-control"
        />
      </div>
    </div>

    <button
      *ngIf="!isUpdateMode"
      (click)="addProduct()"
      class="btn w-100 mt-3 add"
    >
      Add Product
    </button>
    <button
      *ngIf="isUpdateMode"
      (click)="updateProduct()"
      class="update btn w-100 btn-info mt-3"
    >
      Update Product
    </button>
  </div>

  <div>
    <input
      type="text"
      class="form-control w-50 my-3 mx-auto"
      [(ngModel)]="searchQuery"
      placeholder="Search by name"
    />

    <div>
      <table class="table-dark table-bordered container">
        <thead>
          <tr class="text-center">
            <th>Name</th>
            <th>Count</th>
            <th>Price</th>
            <th>EXP</th>
            <th>Update</th>
            <th>Delete</th>
          </tr>
        </thead>
        <!-- -->
        <tbody class="text-center">
          <tr
            *ngFor="let product of filteredProducts"
            [ngClass]="{ expired: isExpired(product.exp) }"
          >
            <td>{{ product.name }}</td>
            <td>{{ product.count }}</td>
            <td>{{ product.price }}</td>
            <td>{{ product.exp }}</td>
            <td>
              <button
                (click)="editProduct(products.indexOf(product))"
                class="btn btn-warning"
              >
                Update
              </button>
            </td>
            <td>
              <button
                (click)="deleteProduct(products.indexOf(product))"
                class="btn btn-danger"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
